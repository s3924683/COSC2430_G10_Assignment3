<%- include('partials/head.ejs') %>
  </head>

  <body>
    <%- include('partials/header.ejs') %>
      </header>
      <%- include('partials/banner.ejs') %>

      <section class="py-5">
        <div class="container-fluid py-5">
          <div class="row g-4">
            <div class="col-md-3">
              <div class="container p-1">
                <div class="d-flex justify-content-between align-items-center">
                  <h6 class="text-uppercase">Category</h6>
                  <%const categorieslength=Object.keys(categories).length%>
                    <% if(categorieslength==0){ %>
                      <span>--</span>
                      <% } else{ %>
                        <span>
                          <%=categorieslength%>
                        </span>
                        <% } %>
                </div>
                <ul id="product-categories">
                  <% for(let key in categories) { %>
                    <li><a class="d-block" href=category/<%=key%>><%=categories[key]%></a></li>
                    <% } %>
                </ul>
              </div>
              <div class="container p-2">
                <div class="d-flex justify-content-between align-items-center">
                  <h6 class="text-uppercase">Price(USD)</h6>
                </div>

                <form class="mb-3 price-input-form">
                  <div class="form-control d-flex">
                    <span>0$</span>
                    <input id="price-range" type="range" class="form-range" min="0" max="10000" value="0">
                    <span>10000$</span>
                  </div>
                </form>
              </div>
              <div class="brand p-2">
              </div>
            </div>
            <div class="container px-4 px-lg-5 mt-5 col-md-9">
              <div class="input-group rounded mb-5">
                <input id="search-box" type="search" class="form-control rounded" placeholder="Search" aria-label="Search"
                  aria-describedby="search-addon" />
                <span class="input-group-text border-0" id="search-addon">
                  <button type="button" id="search-button" class="btn"> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                      fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                      <path
                        d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z" />
                    </svg></button>
                </span>
              </div>

              <div class="row gx-4 gx-lg-5 row-cols-1 row-cols-md-2 row-cols-lg-3 justify-content-center">
                <% if (products.length> 0) { %>

                  <% products.forEach((product)=> { %>
                    <div class="col mb-5">
                      <div class="card h-100">
                        <!-- Product image-->

                        <img class="card-img-top"
                          src="data:<%= product.image.contentType %>;base64,<%= product.image.data.toString('base64') %>"
                          alt="Product Image" height="300px" width="450px" />
                        <!-- Product details-->
                        <div class="card-body p-4">
                          <div class="text-center">
                            <!-- Product name-->
                            <h5 class="fw-bolder">
                              <%=product.name%>
                            </h5>
                            <!-- Product price-->
                            $<%=product.price%>
                          </div>
                        </div>
                        <!-- Product actions-->
                        <div class="card-footer p-4 pt-0 border-top-0 bg-transparent">
                          <div class="text-center">
                            <a class="btn btn-outline-dark mt-auto" href="#">View product</a>
                          </div>
                        </div>
                      </div>
                    </div>
                    <% }); %>

                      <% } else { %>
                        <p>No products found.</p>
                        <% } %>

                          <div class="col mb-5">
                            <div class="card h-100">
                              <!-- Product image-->
                              <img class="card-img-top" src="https://dummyimage.com/450x300/dee2e6/6c757d.jpg"
                                alt="..." />
                              <!-- Product details-->
                              <div class="card-body p-4">
                                <div class="text-center">
                                  <!-- Product name-->
                                  <h5 class="fw-bolder">Fancy Product</h5>
                                  <!-- Product price-->
                                  $40.00 - $80.00
                                </div>
                              </div>
                              <!-- Product actions-->
                              <div class="card-footer p-4 pt-0 border-top-0 bg-transparent">
                                <div class="text-center">
                                  <a class="btn btn-outline-dark mt-auto" href="#">View options</a>
                                </div>
                              </div>
                            </div>
                          </div>
              </div>
      </section>
      <%- include('partials/footer.ejs') %>
        </footer>
        <script src="/js/search.js"></script>
        <%- include('partials/end.ejs') %>